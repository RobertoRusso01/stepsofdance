<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Steps Of Dance | Dashboard Clienti</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./favicon-16x16.png"
    />
    <link rel="manifest" href="./site.webmanifest" />
    <style>
      body {
        background-color: #f8f9fa;
        font-family: "Montserrat", sans-serif; /* Applicato il nuovo font */
      }
      .container {
        margin-top: 20px;
      }
      #backToTop {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px; /* Dimensione del pulsante */
        height: 50px; /* Dimensione del pulsante */
        border-radius: 50%; /* Rende il pulsante circolare */
        background-color: red; /* Colore di sfondo */
        color: white; /* Colore del testo */
        border: none; /* Rimuove il bordo */
        font-size: 24px; /* Dimensione del font */
        display: flex; /* Centra il contenuto */
        align-items: center; /* Centra verticalmente */
        justify-content: center; /* Centra orizzontalmente */
        z-index: 1000; /* Mantiene il pulsante in alto rispetto agli altri elementi */
      }
      #backToTop:hover {
        background-color: #0056b3; /* Colore al passaggio del mouse */
      }

      .btn-custom {
        background-color: #28a745; /* Verde chiaro */
        color: white;
      }
      .btn-custom:hover {
        background-color: #218838; /* Verde scuro */
      }
      .form-control:focus {
        border-color: #dc3545; /* Rosso */
        box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
      }
      .result-item {
        border: 1px solid #dc3545; /* Rosso */
        padding: 10px;
        margin: 5px 0;
        border-radius: 5px;
        background-color: #fff; /* Bianco */
      }
      .client-row {
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 15px;
        margin: 10px 0;
        background-color: #f9f9f9;
      }

      .client-info,
      .purchases {
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 15px;
        margin: 10px 0;
        background-color: #f0f8ff; /* Colore di sfondo chiaro per il cliente */
      }

      .client-info {
        background-color: #e0f7fa; /* Colore di sfondo per le informazioni del cliente */
      }

      .client-details {
        margin-bottom: 10px; /* Margine sotto i dettagli del cliente */
      }

      .purchases {
        margin-top: 10px;
        background-color: #ffebee;
      }

      .purchase-list {
        list-style-type: none; /* Rimuove i punti dell'elenco */
        padding: 0; /* Rimuove il padding predefinito */
      }

      .purchase-list {
        list-style-type: none; /* Rimuove i punti dell'elenco */
        padding: 0; /* Rimuove il padding predefinito */
      }

      .purchase-item {
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
        margin: 5px 0;
        background-color: #fff; /* Colore di sfondo bianco per i singoli acquisti */
      }

      .purchase-item p {
        margin: 5px 0; /* Margine per i paragrafi */
      }

      h3 {
        margin: 0 0 10px; /* Margine per i titoli */
        color: #333; /* Colore del testo dei titoli */
      }
      .client-row span {
        text-align: left; /* Allinea il testo a sinistra */
        margin-bottom: 5px; /* Spaziatura verticale */
      }

      .client-row span:last-child {
        margin-bottom: 0; /* Rimuove il margine dall'ultimo elemento */
      }

      .search-results {
        margin-top: 20px;
      }
      .hidden {
        display: none;
      }

      #daily-income-section {
        margin-top: 20px;
      }

      #daily-income-result {
        margin-top: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div style="text-align: center; margin-bottom: 20px">
      <img
        src="./stepslogo.png"
        alt="Logo"
        class="img-fluid"
        style="max-width: 350px; height: auto"
      />
    </div>
    <div class="container">
      <h1 class="text-center display-4">Dashboard Clienti</h1>
      <p class="lead text-center">
        Benvenuto nella dashboard di Steps Of Dance Store
      </p>

      <div id="daily-income-section" class="mt-5">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Visualizza Incasso Giornaliero</h2>
          <button id="close-daily-income" class="btn btn-danger">Chiudi</button>
        </div>
        <button id="view-daily-income-btn" class="btn btn-primary mt-2">
          Mostra Incasso
        </button>
        <div id="daily-income-result" class="mt-3" style="display: none">
          <h3>Incasso di Oggi: <span id="income-amount"></span></h3>
        </div>
      </div>

      <div class="container">
        <h2 class="mt-4">Calcola Incassi per Intervallo di Date</h2>
        <div class="row g-3 align-items-center mb-3">
            <div class="col-auto">
                <label for="startDate" class="form-label">Data Inizio:</label>
                <input type="date" id="startDate" class="form-control" />
            </div>

            <div class="col-auto">
                <label for="endDate" class="form-label">Data Fine:</label>
                <input type="date" id="endDate" class="form-control" />
            </div>

            <div class="col-auto">
                <button onclick="calcolaIncassi()" class="btn btn-primary mt-4">Calcola</button>
            </div>
        </div>

        <div id="risultato" class="mt-3">
            <h3>Totale Incassi: <span id="totale">0</span> €</h3>
        </div>
    </div>

    <button id="backToTop" class="btn btn-dark">↑</button>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      async function calcolaIncassi() {
          // Prendi i valori delle date
          const startDate = document.getElementById('startDate').value;
          const endDate = document.getElementById('endDate').value;

          // Verifica che le date siano state inserite
          if (!startDate || !endDate) {
              alert('Inserisci entrambe le date');
              return;
          }

          try {
              // Fai la chiamata API
              const response = await fetch(`http://3.67.185.158:3000/api/incassi?startDate=${startDate}&endDate=${endDate}`);
              const data = await response.json();

              // Aggiorna il totale
              document.getElementById('totale').textContent = data.totaleIncassi.toFixed(2);
          } catch (error) {
              console.error('Errore:', error);
              alert('Si è verificato un errore nel calcolo degli incassi');
          }
      }
  </script>
    <script src="script.js"></script>
  </body>
  <footer>
    <div>
      <p class="small text-center mt-5">
        Powered by Roberto Russo Cloud Architect | Distributed by InSync
        Creations
      </p>
    </div>
  </footer>
</html>
